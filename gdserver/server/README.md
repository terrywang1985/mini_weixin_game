# æœåŠ¡å™¨ç®¡ç†è„šæœ¬ä½¿ç”¨è¯´æ˜

è¿™é‡ŒåŒ…å«äº†ä¸€å¥—å®Œæ•´çš„æœåŠ¡å™¨ç®¡ç†è„šæœ¬ï¼Œå¯ä»¥åœ¨ä¸ä½¿ç”¨ Docker çš„æƒ…å†µä¸‹ç®¡ç†æ‰€æœ‰ jigger_protobuf æœåŠ¡å™¨ã€‚

## ğŸ“ è„šæœ¬åˆ—è¡¨

### Windows è„šæœ¬
- `build.bat` - æ„å»ºæ‰€æœ‰æœåŠ¡å™¨
- `start.bat` - å¯åŠ¨æ‰€æœ‰æœåŠ¡å™¨
- `stop.bat` - åœæ­¢æ‰€æœ‰æœåŠ¡å™¨

### Linux/macOS è„šæœ¬
- `build.sh` - æ„å»ºæ‰€æœ‰æœåŠ¡å™¨
- `start.sh` - å¯åŠ¨æ‰€æœ‰æœåŠ¡å™¨
- `stop.sh` - åœæ­¢æ‰€æœ‰æœåŠ¡å™¨

## ğŸš€ ä½¿ç”¨æ–¹æ³•

### Windows ç¯å¢ƒ

1. **æ„å»ºæœåŠ¡å™¨**
   ```cmd
   cd server
   .\build.bat
   ```

2. **å¯åŠ¨æ‰€æœ‰æœåŠ¡å™¨**
   ```cmd
   .\start.bat
   ```

3. **åœæ­¢æ‰€æœ‰æœåŠ¡å™¨**
   ```cmd
   .\stop.bat
   ```

### Linux/macOS ç¯å¢ƒ

1. **æ„å»ºæœåŠ¡å™¨**
   ```bash
   cd server
   ./build.sh
   ```

2. **å¯åŠ¨æ‰€æœ‰æœåŠ¡å™¨**
   ```bash
   ./start.sh
   ```

3. **åœæ­¢æ‰€æœ‰æœåŠ¡å™¨**
   ```bash
   ./stop.sh
   ```

## ğŸ“‚ ç›®å½•ç»“æ„

æ‰§è¡Œè„šæœ¬åï¼Œserver ç›®å½•ç»“æ„å¦‚ä¸‹ï¼š

```
server/
â”œâ”€â”€ bin/                    # ç¼–è¯‘åçš„äºŒè¿›åˆ¶æ–‡ä»¶
â”‚   â”œâ”€â”€ game-server.exe     # Game Server (Windows)
â”‚   â”œâ”€â”€ battle-server.exe   # Battle Server (Windows)
â”‚   â”œâ”€â”€ login-server.exe    # Login Server (Windows)
â”‚   â”œâ”€â”€ game-server         # Game Server (Linux)
â”‚   â”œâ”€â”€ battle-server       # Battle Server (Linux)
â”‚   â””â”€â”€ login-server        # Login Server (Linux)
â”œâ”€â”€ cfg/                    # é…ç½®æ–‡ä»¶
â”‚   â””â”€â”€ cfg_tbdrawcard.json
â”œâ”€â”€ logs/                   # æ—¥å¿—æ–‡ä»¶ (Linux/macOS)
â”‚   â”œâ”€â”€ game-server.log
â”‚   â”œâ”€â”€ battle-server.log
â”‚   â”œâ”€â”€ login-server.log
â”‚   â”œâ”€â”€ game-server.pid
â”‚   â”œâ”€â”€ battle-server.pid
â”‚   â””â”€â”€ login-server.pid
â”œâ”€â”€ src/                    # æºä»£ç 
â”œâ”€â”€ build.bat/build.sh      # æ„å»ºè„šæœ¬
â”œâ”€â”€ start.bat/start.sh      # å¯åŠ¨è„šæœ¬
â””â”€â”€ stop.bat/stop.sh        # åœæ­¢è„šæœ¬
```

## ğŸŒ æœåŠ¡å™¨ç«¯å£

å¯åŠ¨åï¼Œå„æœåŠ¡å™¨ç›‘å¬ä»¥ä¸‹ç«¯å£ï¼š

- **Login Server**: `http://localhost:8081`
- **Game Server**: 
  - WebSocket: `ws://localhost:18080/ws`
  - TCP: `localhost:12345`
  - gRPC: `localhost:50051`
- **Battle Server**: gRPC: `localhost:50053`

## ğŸ“ æ³¨æ„äº‹é¡¹

1. **å‰ç½®æ¡ä»¶**ï¼š
   - ç¡®ä¿å·²å®‰è£… Go 1.18+
   - ç¡®ä¿å·²ç”Ÿæˆ protobuf æ–‡ä»¶ï¼ˆè¿è¡Œ `../tools/gen_proto.bat`ï¼‰
   - ç¡®ä¿é…ç½®æ–‡ä»¶å­˜åœ¨äº `cfg/` ç›®å½•

2. **å·¥ä½œç›®å½•**ï¼š
   - æ‰€æœ‰è„šæœ¬éƒ½åº”åœ¨ `server/` ç›®å½•ä¸‹æ‰§è¡Œ
   - äºŒè¿›åˆ¶æ–‡ä»¶åœ¨ `bin/` ç›®å½•ä¸­æ‰§è¡Œï¼Œé€šè¿‡ `../cfg/` è·¯å¾„åŠ è½½é…ç½®

3. **æ—¥å¿—ç®¡ç†**ï¼š
   - Windows: æ¯ä¸ªæœåŠ¡å™¨åœ¨ç‹¬ç«‹çª—å£ä¸­è¿è¡Œï¼Œå¯ç›´æ¥æŸ¥çœ‹æ—¥å¿—
   - Linux/macOS: æ—¥å¿—ä¿å­˜åœ¨ `logs/` ç›®å½•ï¼Œä½¿ç”¨ `tail -f logs/æœåŠ¡å™¨å.log` æŸ¥çœ‹å®æ—¶æ—¥å¿—

4. **Redis ä¾èµ–**ï¼š
   - æœåŠ¡å™¨éœ€è¦ Redis æœåŠ¡ï¼Œè¯·ç¡®ä¿ Redis åœ¨ `localhost:6379` è¿è¡Œ
   - å¯é€šè¿‡ç¯å¢ƒå˜é‡ `REDIS_ADDR` è‡ªå®šä¹‰ Redis åœ°å€

## ğŸ› æ•…éšœæ’é™¤

1. **ç¼–è¯‘å¤±è´¥**ï¼šæ£€æŸ¥ Go ç¯å¢ƒå’Œä¾èµ–æ˜¯å¦æ­£ç¡®å®‰è£…
2. **å¯åŠ¨å¤±è´¥**ï¼šæ£€æŸ¥ç«¯å£æ˜¯å¦è¢«å ç”¨ï¼Œé…ç½®æ–‡ä»¶æ˜¯å¦å­˜åœ¨
3. **Redis è¿æ¥å¤±è´¥**ï¼šç¡®ä¿ Redis æœåŠ¡å·²å¯åŠ¨
4. **é…ç½®æ–‡ä»¶æ‰¾ä¸åˆ°**ï¼šç¡®ä¿åœ¨ `server/` ç›®å½•ä¸‹æ‰§è¡Œè„šæœ¬